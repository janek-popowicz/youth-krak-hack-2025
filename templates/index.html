<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#10b981">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-192.png">
    <style>
body {
    overflow: hidden;
    height: 100vh ;
    width: 100% ;
    display: flex ;
    flex-direction: column;
    justify-content: flex-end ;
    align-items: center ;
    gap: 12px;
    background: #eef2f6;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}
main#subjects-list {
    width: 100%;
    max-width: 480px;
    padding: 12px;
    box-sizing: border-box;
}
.subject {
    background: #fff;
    border-radius: 10px;
    padding: 12px;
    margin-bottom: 10px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 12px rgba(0,0,0,0.06);
}
.subject .info { display: flex; flex-direction: column; gap: 6px; width: 100%; }
.subject .actions { display: flex; gap: 8px; align-items: center; margin-left: 12px; }

/* progress bar */
.progress-wrap {
    height: 8px;
    background: rgba(0,0,0,0.06);
    border-radius: 999px;
    overflow: hidden;
    margin-top: 6px;
    width: 100%;
}
.progress-bar {
    height: 100%;
    width: 0%;
    background: linear-gradient(90deg, #4ade80, #10b981);
    transition: width 0.2s linear;
}
.progress-bar[data-phase="break"] {
    background: linear-gradient(90deg, #f59e0b, #f97316);
}

/* status small text */
.subject .status { color: #555; font-size: 13px; margin-top: 6px; }

nav {
    position: relative ;
    bottom: 0 ;
    display: flex ;
    align-items: flex-end ;
    justify-content: center;
    padding: 16px;
    gap: 24px;
}
button.icon {
    background: none ;
    border: none ;
    cursor: pointer;
    padding: 8px;
    border-radius: 8px;
}
button.icon:hover { background: rgba(0,0,0,0.04); }

/* modal */
.modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.35);
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 100;
}
.modal {
    background: #fff;
    border-radius: 12px;
    padding: 16px;
    width: 92%;
    max-width: 420px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
}
.modal h3 { margin: 0 0 8px 0; }
.form-row { display:flex; gap:8px; margin-bottom:8px; }
.form-row input[type="text"], .form-row input[type="number"]{
    flex:1;
    padding: 8px 10px;
    border: 1px solid #ddd;
    border-radius: 8px;
    font-size: 14px;
}
.modal .actions { display:flex; gap:8px; justify-content:flex-end; margin-top:8px; }
    </style>
    <title>Focus Forest</title>
    <link rel="manifest" href="manifest.json">

    <script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js');
    }
    </script>
</head>
<body>
    <!-- lista przedmiotów -->
    <main id="subjects-list" aria-live="polite">
        <!-- dynamicznie wstawiane przedmioty -->
    </main>

    <nav>
        <button class="icon" title="Pomysły">
            <img height="48" src="icons/guzik_g77.svg" alt="bulb">
        </button>
        <button id="add-subject" class="icon" title="Dodaj przedmiot">
            <img height="64" src="icons/guzik_g78.svg" alt="plus">
        </button>
        <button class="icon" title="Twoje">
            <img height="48" src="icons/guzik_g79.svg" alt="case">
        </button>
    </nav>

    <!-- modal dodawania przedmiotu -->
    <div id="modal-backdrop" class="modal-backdrop" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal" role="document">
            <h3>Dodaj przedmiot</h3>
            <div class="form-row">
                <input id="input-nazwa" type="text" placeholder="Nazwa przedmiotu" />
            </div>
            <div class="form-row">
                <input id="input-minutes" type="number" min="1" placeholder="Ile minut potrafisz się skupić (np. 30)" />
            </div>
            <div class="actions">
                <button id="modal-cancel" class="icon">Anuluj</button>
                <button id="modal-submit" class="icon">Dodaj</button>
            </div>
        </div>
    </div>

    <script src="{{ url_for('static', filename='main.js') }}"></script>
    </body>
    </html>